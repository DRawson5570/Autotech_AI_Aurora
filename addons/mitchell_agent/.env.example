# ============================================================================
# Mitchell AI Employee Configuration
# ============================================================================
# Copy this to .env and fill in your values:
#   cp .env.example .env
#
# The Mitchell Agent is an "AI Employee" that runs locally at your site,
# navigates ShopKeyPro on your behalf, and returns automotive data to
# Autotech AI.
# ============================================================================

# ----------------------------------------------------------------------------
# REQUIRED: Shop Identity
# ----------------------------------------------------------------------------
# Unique identifier for your shop (provided by Autotech AI)
MITCHELL_SHOP_ID=your_shop_id

# Human-readable name for your shop (optional, for logging)
MITCHELL_SHOP_NAME="Your Shop Name"

# ----------------------------------------------------------------------------
# REQUIRED: ShopKeyPro Credentials
# ----------------------------------------------------------------------------
# Your ShopKeyPro login credentials (never sent to cloud - used locally only)
MITCHELL_USERNAME=your_shopkeypro_username
MITCHELL_PASSWORD=your_shopkeypro_password

# ShopKeyPro base URL (the main application URL)
MITCHELL_BASE_URL="https://www.shopkeypro.com/#||||||||||||||||||/Home"

# ShopKeyPro login URL
MITCHELL_LOGIN_URL=https://www1.shopkeypro.com/Login

# ----------------------------------------------------------------------------
# Autotech AI Server Connection
# ----------------------------------------------------------------------------
# URL of the Autotech AI server
# For local development: http://localhost:8080
# For production: https://automotive.aurora-sentient.net
MITCHELL_SERVER_URL=https://automotive.aurora-sentient.net

# ----------------------------------------------------------------------------
# Browser Settings
# ----------------------------------------------------------------------------
# Show browser window? Set to false to see the AI Employee working!
# true = invisible/headless (production)
# false = visible/headed (debugging, watching the AI work)
MITCHELL_HEADLESS=true

# Path to Chrome/Chromium executable
# Examples:
#   Linux: /usr/bin/google-chrome
#   macOS: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
#   Windows: C:\Program Files\Google\Chrome\Application\chrome.exe
CHROME_EXECUTABLE_PATH=/usr/bin/google-chrome

# Chrome user data directory for session persistence
# Using a dedicated profile prevents conflicts with your regular Chrome
CHROME_USER_DATA_PATH=/tmp/mitchell-chrome-profile

# ----------------------------------------------------------------------------
# Navigator Backend (Gemini or Ollama)
# ----------------------------------------------------------------------------
# Which LLM to use for vehicle navigation:
#   gemini = Google Gemini Flash (default, fast & cheap)
#   ollama = Local Ollama instance (requires local model)
#   server = Server-side navigation
NAVIGATOR_BACKEND=gemini

# ----------------------------------------------------------------------------
# Gemini AI Navigation (Default - Cloud LLM)
# ----------------------------------------------------------------------------
# Get your API key at: https://makersuite.google.com/app/apikey
# Gemini Flash is fast and cheap (~$0.00001 per navigation step)
GEMINI_API_KEY=your_gemini_api_key
GEMINI_MODEL=gemini-2.0-flash

# ----------------------------------------------------------------------------
# Ollama AI Navigation (Alternative - Local LLM)
# ----------------------------------------------------------------------------
# Use local Ollama if you prefer on-device AI (requires GPU/fast CPU)
# Install Ollama: https://ollama.ai/download
# Then: ollama pull qwen3:8b

# Ollama server URL
OLLAMA_URL=http://localhost:11434

# Model for vehicle navigation (qwen3:8b recommended)
OLLAMA_MODEL=qwen3:8b

# ----------------------------------------------------------------------------
# Agent Behavior
# ----------------------------------------------------------------------------
# How often to check for new work (seconds)
MITCHELL_POLL_INTERVAL=2.0

# How long to wait after an error before retrying (seconds)
MITCHELL_ERROR_BACKOFF=10.0

# ----------------------------------------------------------------------------
# Scaling / Worker Pool Settings
# ----------------------------------------------------------------------------
# Scaling mode controls how the agent handles concurrent requests:
#
#   single   = One Chrome instance, one request at a time (classic, default)
#              Pros: Simple, lowest memory usage
#              Cons: Requests queue up, no parallelism
#
#   pool     = Fixed pool of Chrome workers with auto-scaling
#              Pros: Parallel processing, workers stay warm (fast)
#              Cons: Higher memory usage (500MB-1GB per worker)
#
#   ondemand = Spawn Chrome per request, kill when done
#              Pros: No idle resource usage
#              Cons: Cold start penalty (~2s overhead)
#
MITCHELL_SCALING_MODE=single

# Pool mode settings (ignored in single mode):
MITCHELL_POOL_MIN_WORKERS=1       # Minimum workers to keep running
MITCHELL_POOL_MAX_WORKERS=3       # Maximum concurrent workers
MITCHELL_POOL_IDLE_TIMEOUT=300    # Seconds before killing idle worker
MITCHELL_POOL_BASE_PORT=9222      # Starting CDP port for Chrome instances

# Note: ShopKeyPro may have concurrent session limits. Start with max=3
# and increase if your account supports more simultaneous sessions.

# ----------------------------------------------------------------------------
# Navigation Timing Settings
# ----------------------------------------------------------------------------
# These control delays during ShopKeyPro navigation to handle AJAX loads
# Increase these if you see "element not found" errors or stale data

# Short delay for quick UI updates (milliseconds)
MITCHELL_NAV_DELAY_SHORT=300

# Medium delay for page transitions (milliseconds)
MITCHELL_NAV_DELAY_MEDIUM=1000

# Long delay for heavy content loads (milliseconds)
MITCHELL_NAV_DELAY_LONG=3000

# Delay after AJAX requests (milliseconds)
MITCHELL_NAV_DELAY_AJAX=600

# Delay between navigation steps (seconds)
MITCHELL_NAV_DELAY_STEP=0.6

# Delay after modal close (seconds)
MITCHELL_NAV_DELAY_MODAL=1.0

# ----------------------------------------------------------------------------
# Logging & Debug
# ----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR
MITCHELL_LOG_LEVEL=INFO

# Optional: Log file path (default: logs to stdout only)
# MITCHELL_LOG_FILE=/tmp/mitchell_agent.log

# Optional: Save screenshots at each navigation step (for debugging)
# MITCHELL_DEBUG_SCREENSHOTS=false
